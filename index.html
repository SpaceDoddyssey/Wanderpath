<!DOCTYPE html>
<html lang="en">
<head>
    <title>Wanderpath</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="src/style.css" />
    <link rel="icon" type="image/jpg" href="assets/icon.jpg" sizes="96x96">
    <a id="seedAnchor" href="/en-US/docs/Location.href#seed"></a>
</head>

<body>
    <!-- Game Settings and Controls -->
    <div id="numFieldCol" class="column num-field-col" style="grid-area:col1">
        <!-- First we create the parameter fields and associated labels -->
        <br><br>
        <div class="center-text"><b>-- Puzzle Settings --</b></div>
        <br>
        <script>
            function createNumberFieldAndLabel(id, labelFor, labelText, defaultValue, minVal, maxVal) {
                const div = document.createElement("div");
                div.classList.add("flex-row");
                div.innerHTML = `<input type="number" id="${id}" name="${id}" class="param-field" required 
                                    onchange="enforceMinMax(this)" min="${minVal}" max="${maxVal}" value="${defaultValue}">
                                    <label for="${labelFor}" class="param-label">
                                ${labelText} (${minVal}-${maxVal})</label>`;
                document.getElementById("numFieldCol").appendChild(div);
            }

            const heightRange = [3, 8];
            const widthRange = [3, 8];
            const lengthRange = [12, 60];
            const maxCrossRange = [1, 5];
            createNumberFieldAndLabel("widthField",       "widthField",       "Width",              3,  widthRange[0],    widthRange[1]);
            createNumberFieldAndLabel("heightField",      "heightField",      "Height",             3,  heightRange[0],   heightRange[1]);
            createNumberFieldAndLabel("lengthField",      "lengthField",      "Path Length",        12, lengthRange[0],   lengthRange[1]);
            createNumberFieldAndLabel("maxCrossingField", "maxCrossingField", "Max Cross Capacity", 4,  maxCrossRange[0], maxCrossRange[1]);
        </script>

        <!-- Button to regenerate the grid -->
        <div class="center-text">
        <button type="button" id="regenerateGridButton">Regenerate Game (R)</button>
        </div>

        <!-- Spot for a warning label if you entered invalid parameters -->
        <label id="HtmlErrorLabel" style="background-color:#ff0404;"> </label>

        <!-- Controls -->
        <div class="center-text">
            <br>
            <b>-- Controls --</b>
            <br>
            <br>WASD/Arrow Keys to move
            <br><button type="button" id="undoButton">Undo (Z)</button>
            <br><button type="button" id="resetButton">Reset (X)</button>
            <br><button type="button" id="changeStartNodeButton">Change Starting Node (Q)</button>
            <br><button type="button" id="checkSolutionButton">Check Solution (Enter)</button> 

        <br><br>
        <b>-- Share --</b>
        <br><br>

        <button type="button" id="shareButton" onclick="copyBaseURL()">Share Wanderpath</button><br>
        <button type="button" id="sharePuzzleButton" onclick="copySeedURL()">Share this puzzle</button>
        <span class="credit"><br>Design and programming by <b>Cameron Dodd</b></span>
        </div>
    </div>
    
    <!-- Game div -->
    <div class="column" style="grid-area:col2">
        <!-- Title -->
        <h1 class="title"><b>~Wanderpath~</b></h1>
        <p class="subtitle">
            Welcome to a new kind of puzzle game!</p>
        <!-- Spot for the Phaser canvas -->
        <div id="game"></div>
        <div id="HtmlWinLabel" class="center-text"></div>   
    </div>

    <!-- Descriptive text -->
    <div style="grid-area:col3; margin-right: 40px;">
        <br><br>
        <p class="center-text">
            <b>-- The Goal --</b>
        </p>
            Start on either large circle and trace a path to the other circle.
            If there is only one circle, trace a path back to the starting circle</p>
        <p class="center-text"> 
            <b>-- The Rules --</b>
        </p>
            The path can cross over itself (but can't reverse direction)<br><br>
            A number on a line or intersection indicates that you must pass over that line/intersection <i>exactly</i> that many times<br><br>
            A blue arrow on a line indicates that you must pass over it at least once, but you may only travel in the direction the arrow points<br><br>
            Hint: If arrows are present, it may be possible that there is only a solution from one of the two circles!</p>
    </div>

    <!-- Imports -->
    <script src="./lib/phaser.js"></script>
    <script src="./src/PuzzleGrid.js"></script>
    <script src="./src/MainScene.js"></script>
    <script src="./src/GraphElement.js"></script>
    <script src="./src/Node.js"></script>
    <script src="./src/Edge.js"></script>
    <script src="./src/Path.js"></script>
    <script src="./src/main.js"></script>
</body>
</html>